<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Atoumus blog]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://atoumus.github.io/"/>
  <updated>2016-03-16T10:26:02.000Z</updated>
  <id>http://atoumus.github.io/</id>
  
  <author>
    <name><![CDATA[atoumus]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[PHP - получаем гео-инфо пользователя по IP]]></title>
    <link href="http://atoumus.github.io/php-detect-country-by-ip.html"/>
    <id>http://atoumus.github.io/php-detect-country-by-ip.html</id>
    <published>2016-02-16T05:54:02.000Z</published>
    <updated>2016-03-16T10:26:02.000Z</updated>
    <content type="html"><![CDATA[<p>В продолжение темы про IP, в этой статье будут рассмотрены способы определения страны, города и другой гео-ино о пользователе по его IP.</p>
<a id="more"></a>
<h2 id="GeoIP__u0432__u0432_u0438_u0434_u0435_PHP__u0440_u0430_u0441_u0448_u0438_u0440_u0435_u043D_u0438_u044F"><a href="#GeoIP__u0432__u0432_u0438_u0434_u0435_PHP__u0440_u0430_u0441_u0448_u0438_u0440_u0435_u043D_u0438_u044F" class="headerlink" title="GeoIP в виде PHP расширения"></a>GeoIP в виде PHP расширения</h2><p>Навреное самая часто используемая библиотека для определения IP (<a href="http://php.net/manual/ru/book.geoip.php" target="_blank" rel="external">оф. док на php.net</a>). Оно и не мудрено, ведь бинарная БД + скомпилированное PHP расширение работают быстрее всех остальных способов.</p>
<p>Установка на Ubuntu Server:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install php5-geoip</span><br></pre></td></tr></table></figure>
<p>После установки скачиваем последние обновления базы IP адресов:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo wget -N http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz</span><br><span class="line">sudo gunzip GeoIP.dat.gz</span><br><span class="line">sudo mv GeoIP.dat /usr/share/GeoIP/</span><br></pre></td></tr></table></figure>
<p>После этих действий необходимо перезагрузить PHP. Это нужно для того что бы PHP интерпретатор подгрузил только что установленное расширение (php5-geoip) и новые базы IP адресов.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo service php5-fpm restart <span class="comment"># если вы используете NGINX</span></span><br><span class="line"><span class="comment"># или</span></span><br><span class="line">sudo service apache2 restart <span class="comment"># если вы используете Apache</span></span><br></pre></td></tr></table></figure>
<p>Также переодически необходимо обновлять базы IP адресов:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo wget -N http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz</span><br><span class="line">sudo gunzip GeoIP.dat.gz</span><br><span class="line">sudo mv GeoIP.dat /usr/share/GeoIP/</span><br></pre></td></tr></table></figure>
<p>После обновления так же необходимо перезагружать PHP для примененеия обновленной базы IP адресов:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo service php5-fpm restart <span class="comment"># если вы используете NGINX</span></span><br><span class="line"><span class="comment"># или</span></span><br><span class="line">sudo service apache2 restart <span class="comment"># если вы используете Apache</span></span><br></pre></td></tr></table></figure>
<p>После того как GeoIP установлен, его можно использовать в коде, например так:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="variable">$countryCode</span> = geoip_country_code_by_name(<span class="variable">$_SERVER</span>[<span class="string">'REMOTE_ADDR'</span>]);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$countryCode</span>;</span><br></pre></td></tr></table></figure>
<h2 id="GeoIP__u0432__u0432_u0438_u0434_u0435_composer__u043F_u0430_u043A_u0435_u0442_u0430"><a href="#GeoIP__u0432__u0432_u0438_u0434_u0435_composer__u043F_u0430_u043A_u0435_u0442_u0430" class="headerlink" title="GeoIP в виде composer пакета"></a>GeoIP в виде composer пакета</h2><p>Этот способ, почти идентичен с GeoIP в виде расширения для PHP, за одним исключением: вам не нужно устанавливать на сервер дополнительные расширения.</p>
<p>Полезно это в том случае, если у вас нет root прав к серверу и вы не можете устанавливать PHP расширения.</p>
<p>Недостаток этого способа в том что он работает немного медленнее в сравнении со скомпилированным PHP расширением.</p>
<p>Подробную инструкцию можно почитать на <a href="https://maxmind.github.io/GeoIP2-php/" target="_blank" rel="external">офф. сайте</a>, я лиш расскажу вкратце.</p>
<p>Первым делом необходимо скачать БД IP адресов в специальном формате (.mmdb) с <a href="http://dev.maxmind.com/geoip/geoip2/geolite2/" target="_blank" rel="external">офф. сата</a>, и поместить его в любую папку на сервере которая вам доступна:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget -N http://geolite.maxmind.com/download/geoip/database/GeoLite2-Country.mmdb.gz</span><br><span class="line">gunzip GeoLite2-Country.mmdb.gz</span><br><span class="line">mv GeoLite2-Country.mmdb /my-site/data/GeoIP/</span><br></pre></td></tr></table></figure>
<p>Далее установить через composer офф. пакет geoip:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require geoip2/geoip2:~<span class="number">2.0</span></span><br></pre></td></tr></table></figure>
<p>После этих двух несложных действий, можно начинать его использовать в своих PHP скриптах, пример:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">GeoIp2</span>\<span class="title">Database</span>\<span class="title">Reader</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$reader</span> = <span class="keyword">new</span> Reader(<span class="string">'/my-site/data/GeoIP/GeoLite2-Country.mmdb'</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$geo</span> = <span class="variable">$reader</span>-&gt;country(<span class="variable">$_SERVER</span>[<span class="string">'REMOTE_ADDR'</span>]);</span><br><span class="line">var_dump(<span class="variable">$geo</span>-&gt;country-&gt;isoCode);</span><br><span class="line">var_dump(<span class="variable">$geo</span>-&gt;country-&gt;name);</span><br></pre></td></tr></table></figure>
<h2 id="Sypex_Geo"><a href="#Sypex_Geo" class="headerlink" title="Sypex Geo"></a>Sypex Geo</h2><p>Офф. сайт: <a href="https://sypexgeo.net/ru/" target="_blank" rel="external">https://sypexgeo.net/ru/</a></p>
<p>Также поставляется в виде PHP класса и бинарной библиотеки. К сожалению офф. composer пакета у нее нет. Но можно воспользоваться и не офф: <a href="https://packagist.org/packages/igi/sypexgeo" target="_blank" rel="external">https://packagist.org/packages/igi/sypexgeo</a></p>
<p>Этот composer пакет хорош еще тем, что позволяет при выполнеии команды “composer install” обновлять БД IP адресов.</p>
<p>Для того что бы установить этот композер пакет и настроить автообновление БД IP адресов, нужно в файле composer.json прописать следующие настройки:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "<span class="attribute">require-dev</span>": <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">igi/sypexgeo</span>": <span class="value"><span class="string">"@dev"</span></span><br><span class="line">    </span>&#125;</span>,</span><br><span class="line">    "<span class="attribute">scripts</span>": <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">post-install-cmd</span>": <span class="value">[</span><br><span class="line">            <span class="string">"IgI\\SypexGeo\\Composer::installDatabases"</span></span><br><span class="line">        ]</span><br><span class="line">    </span>&#125;</span>,</span><br><span class="line">    "<span class="attribute">extra</span>": <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">sypexgeo_remote</span>": <span class="value"><span class="string">"https://sypexgeo.net/files/SxGeoCountry.zip"</span></span>,</span><br><span class="line">        "<span class="attribute">sypexgeo_local</span>": <span class="value"><span class="string">"/var/www/at0m1x.dev/test/data/SxGeo.dat"</span></span><br><span class="line">    </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<p>Обратите внимание на следующие настройки:</p>
<ul>
<li>подключение пакета необходимо располагать в секции require-dev</li>
<li>при подключении пакета необходимо указывать уровень стабильности @dev</li>
<li>в секции sypexgeo_remote вместо SxGeoCountry.zip можно указать SxGeoCity_utf8.zip</li>
<li>в параметре sypexgeo_local вам необходимо указать свой путь к папке</li>
</ul>
<p>Далее выполняем установку composer пакетов:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install</span><br></pre></td></tr></table></figure>
<p>После установки самой библиотеки, обновится и БД IP адресов с офф. сайта.</p>
<p>Пример использования в PHP коде:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$sxGeo</span> = <span class="keyword">new</span> \IgI\SypexGeo\SxGeo(<span class="keyword">__DIR__</span> . <span class="string">'/data/SxGeo.dat'</span>);</span><br><span class="line">var_dump(<span class="variable">$sxGeo</span>-&gt;getCountry(<span class="string">'89.163.220.14'</span>));</span><br></pre></td></tr></table></figure>
<p>Кроме использования composer пакета, также можно использовать REST API этого проекта, пример: <a href="http://api.sypexgeo.net/json/89.163.220.14" target="_blank" rel="external">http://api.sypexgeo.net/json/89.163.220.14</a> Об онлайн сервисах для определения гео инфы читайте ниже в этой статье. </p>
<h2 id="IP2LOCATION"><a href="#IP2LOCATION" class="headerlink" title="IP2LOCATION"></a>IP2LOCATION</h2><p>Офф. сайт: <a href="http://www.ip2location.com/" target="_blank" rel="external">http://www.ip2location.com/</a></p>
<p>Еще одна composer библиотека из-за рубежа.</p>
<p>Установка:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require ip2location/ip2location-php</span><br></pre></td></tr></table></figure>
<p>При установки этого composer пакета, и также при его обновлении, также будет обновлятся БД IP адресов, которая находится по такому пути:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/vendor/ip2location/ip2location-php/databases/IP2LOCATION-LITE-DB1.BIN</span><br></pre></td></tr></table></figure></p>
<p>Использование:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$db</span> = <span class="keyword">new</span> \IP2Location\Database(</span><br><span class="line">    <span class="keyword">__DIR__</span> . <span class="string">'/vendor/ip2location/ip2location-php/databases/IP2LOCATION-LITE-DB1.BIN'</span>,</span><br><span class="line">    \IP2Location\Database::FILE_IO</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="variable">$records</span> = <span class="variable">$db</span>-&gt;lookup(<span class="string">'89.163.220.14'</span>, \IP2Location\Database::ALL);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'IP Number             : '</span> . <span class="variable">$records</span>[<span class="string">'ipNumber'</span>] . <span class="string">"\n"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'IP Version            : '</span> . <span class="variable">$records</span>[<span class="string">'ipVersion'</span>] . <span class="string">"\n"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'IP Address            : '</span> . <span class="variable">$records</span>[<span class="string">'ipAddress'</span>] . <span class="string">"\n"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Country Code          : '</span> . <span class="variable">$records</span>[<span class="string">'countryCode'</span>] . <span class="string">"\n"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Country Name          : '</span> . <span class="variable">$records</span>[<span class="string">'countryName'</span>] . <span class="string">"\n"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="TabGeo"><a href="#TabGeo" class="headerlink" title="TabGeo"></a>TabGeo</h2><p>Офф. сайт: <a href="http://tabgeo.com/ru/index/" target="_blank" rel="external">http://tabgeo.com/ru/index/</a></p>
<p>Появился сравнительно не давно, первая версия composer пакета была опубликована 27 сентября 2015.</p>
<p>Позиционирует себя как самый быстрый, по сравнению с такими конкурентами как: GeoIP и Sypex Geo. Но скорость достигается засчет малого размера базы, в следствии чего эта библиотека определяет только код страны.</p>
<p>Распространяется в виде composer пакета + бинарная БД в своем собственном формате.</p>
<p>Для установки этой библиотеки нужно всего лиш подключить композер пакет:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require tabgeo/country</span><br></pre></td></tr></table></figure>
<p>При этом установится как PHP библиотека так и сама БД:</p>

<p><img src="/270216-tabgeo.png" alt="PHP - получаем гео-инфо пользователя по IP"></p>

<p>Пример использования в PHP скрипте:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$country</span> = TabGeo\country(<span class="string">'89.163.220.14'</span>);</span><br><span class="line">var_dump(<span class="variable">$country</span>);</span><br></pre></td></tr></table></figure>
<p>Стоит заметить, что TabGeo позволяет получить только двузначный код страны в формате <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" target="_blank" rel="external">ISO 3166-1 alpha-2</a>. Если вам нужно что то большее, например определить регион, город, временную зону, или пр., то нужно использовать например тот же GeoIP, т.к. он позволяет все это определить.</p>
<h2 id="u041E_u043D_u043B_u0430_u0439_u043D__u0441_u0435_u0440_u0432_u0438_u0441_u044B__u0434_u043B_u044F__u0433_u0435_u043E_u0442_u0430_u0440_u0433_u0435_u0442_u0438_u043D_u0433_u0430"><a href="#u041E_u043D_u043B_u0430_u0439_u043D__u0441_u0435_u0440_u0432_u0438_u0441_u044B__u0434_u043B_u044F__u0433_u0435_u043E_u0442_u0430_u0440_u0433_u0435_u0442_u0438_u043D_u0433_u0430" class="headerlink" title="Онлайн сервисы для геотаргетинга"></a>Онлайн сервисы для геотаргетинга</h2><p>В качестве альтернативы можно использовать специальные онлайн сервисы. Принцип их работы прост: передаем GET параметром IP и в ответ получаем гео-инфу в формате JSON или XML.</p>
<p>Преимущество этого способы в том, что его можно использовать не только на стороне PHP, но и на стороне например JavaScript.</p>
<p>Но есть и существенные недостатки:</p>
<ul>
<li>работает это не так быстро как PHP библиотека;</li>
<li>вы не можете обновить БД IP адресов;</li>
<li>ваш сервер могут заблокировать за частые обращения.</li>
</ul>
<p>Вот несколько таких онлайн сервисов:</p>
<ul>
<li><a href="http://ipgeobase.ru:7020/geo?ip=89.163.220.14" target="_blank" rel="external">ipgeobase.ru</a></li>
<li><a href="http://www.geoplugin.net/json.gp?ip=89.163.220.14" target="_blank" rel="external">geoplugin.net</a></li>
<li><a href="http://api.sypexgeo.net/json/89.163.220.14" target="_blank" rel="external">sypexgeo.net</a>
</li>
</ul>
<h2 id="u0417_u0430_u043A_u043B_u044E_u0447_u0435_u043D_u0438_u0435"><a href="#u0417_u0430_u043A_u043B_u044E_u0447_u0435_u043D_u0438_u0435" class="headerlink" title="Заключение"></a>Заключение</h2><p>Почти все вышеперечисленные библиотеки предоставляют два вида баз данных IP адресов:</p>
<ul>
<li>облегченный, только со списком стран, как правило в названии содержит Country;</li>
<li>более полный, в котором кроме стран также содержится инфо о крупных городах, как правило в названии содержит City и больше весит;</li>
</ul>
<p>Более полная БД IP адресов с городами конечно будет работать немного медленнее в силу того что она больше по объему.</p>
<p>Наиболее правильно использовать GeoIP в виде PHP расширения. Т.к. работать он будет всегда и быстро. Также вы всегда можете обновить базы IP адресов.</p>
<p>Если нет возможности установить GeoIP в виде PHP расширения, то можно использовать один из composer пакетов: GeoIP, Sypex Geo, IP2LOCATION или TabGeo.</p>
<p>Если же использование composer пакета по какой-то причине не возможно, тогда остается использовать онлайн сервисы. Но обязательно нужно сделать кеширование запросов на эти сервисы в свою БД. Кеширование нужно для того что бы не отправлять один и тот же запрос по много раз. Достаточно один раз получить гео-инфу по интересующему ИП через онлайн сервис, после чего сохранить ее к себе в БД, и далее брать уже из БД. Таким образом вы уменьшите кол-во запросов на онлайн сервис и уменьшите вероятность того что онлайн сервис вас заблокирует за множественные запросы.</p>
<p>Стоит заметить, что почти у всех вышеперечисленных библиотек есть бесплатные и платные версии. В платных версиях вам будет доступно больше гео инфы чем в бесплатных.</p>
<p>Так же вы можете почитать о том, <a href="/test-site-by-other-country-ip.html" title="как проверить сайт под IP другой страны через прокси сервер">как проверить сайт под IP другой страны через прокси сервер</a>.</p>]]></content>
    <summary type="html">
    <![CDATA[<p>В продолжение темы про IP, в этой статье будут рассмотрены способы определения страны, города и другой гео-ино о пользователе по его IP.</p>]]>
    
    </summary>
    
      <category term="PHP" scheme="http://atoumus.github.io/categories/PHP/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Как проверить сайт под IP другой страны через прокси сервер]]></title>
    <link href="http://atoumus.github.io/test-site-by-other-country-ip.html"/>
    <id>http://atoumus.github.io/test-site-by-other-country-ip.html</id>
    <published>2016-02-07T05:14:02.000Z</published>
    <updated>2016-03-16T12:18:26.969Z</updated>
    <content type="html"><![CDATA[<p>Иногда возникает необходимость зайти на свой сайт под IP другой страны. Например что бы проверить ту или иную функциональность, которая работает по разному в зависимости с IP какой страны зашел пользователь. В этой статье будут рассмотрены способы как это можно удобно сделать.</p>
<a id="more"></a>
<p>Это можно сделать тремя способами:</p>
<ul>
<li>через Tor браузер;</li>
<li>через список бесплатных прокси серверов;</li>
<li>через платный прокси сервер;</li>
</ul>
<h2 id="u0427_u0435_u0440_u0435_u0437_Tor__u0431_u0440_u0430_u0443_u0437_u0435_u0440"><a href="#u0427_u0435_u0440_u0435_u0437_Tor__u0431_u0440_u0430_u0443_u0437_u0435_u0440" class="headerlink" title="Через Tor браузер"></a>Через Tor браузер</h2><p>Мало кто знает об этом способе, и я до недавнего времени не знал.</p>
<p>Вообще Tor браузер предназначен для ананимности в сети. Ваш трафик проходит через несколько промежуточных прокси серверов (Tor сеть). И таким образом в конечной точке трудно определить ваш настоящий IP. При этом Tor браузер сам решает через какие прокси сервера вас направить.</p>
<p>Но недавно я заинтересовался вопросом, можно ли Tor браузер заставить использовать только прокси сервера определенной страны. И как оказалось, можно.</p>
<p>Что нужно сделать что бы Tor использовал IP нужной вам страны? Во первых конечно нужно установить Tor браузер, это сделать не сложно: <a href="https://www.torproject.org/projects/torbrowser.html.en" target="_blank" rel="external">ссылка на скачивание Tor браузера</a>.</p>
<p>После установки, открываем специальный конфигурационный файл, у меня он лежит по такому пути (у вас может быть другой путь):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\at0m1x\Desktop\Tor Browser\Browser\TorBrowser\Data\Tor\torrc</span><br></pre></td></tr></table></figure>
<p>Открываем этот файл и ищем в нем слово: ExitNodes.</p>
<p>Если не нашлось, что скорее всего, то добавляем в конец этого файла:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExitNodes &#123;us&#125;</span><br></pre></td></tr></table></figure>
<p>us - это двузначный код страны (<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" target="_blank" rel="external">ISO 3166-1 alpha-2</a>), его нужно обязательно указывать маленькими буквами. В данном случае us это US т.е. United States.</p>
<p>После того как вы таким образом указали код нужной вам страны, сохраняем изменения в этом файле и закрываем его. Запускаем Tor браузер, и проверяем через какую страну идет проксирование трафика:</p>

<p><img src="/070216-tor-ip.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>Преимущества такого способа:</p>
<ul>
<li>быстрота работы Tor браузера;</li>
<li>безопасность;</li>
</ul>
<p>Но есть и один недостаток: не для всех стран есть Tor сети. Например если вы попробуете выставить код такой страны как Нигерия {ng}, то он у вас не заработает, потому что в Нигерии скорее всего нет Tor серверов. Поэтому если вам нужны какие то особые страны, нужно использовать бесплатные прокси сервера, об этом ниже.</p>
<h2 id="u0418_u0441_u043F_u043E_u043B_u044C_u0437_u0443_u0435_u043C__u0431_u0435_u0441_u043F_u043B_u0430_u0442_u043D_u044B_u0435__u043F_u0440_u043E_u043A_u0438__u0441_u0435_u0440_u0432_u0435_u0440_u0430"><a href="#u0418_u0441_u043F_u043E_u043B_u044C_u0437_u0443_u0435_u043C__u0431_u0435_u0441_u043F_u043B_u0430_u0442_u043D_u044B_u0435__u043F_u0440_u043E_u043A_u0438__u0441_u0435_u0440_u0432_u0435_u0440_u0430" class="headerlink" title="Используем бесплатные проки сервера"></a>Используем бесплатные проки сервера</h2><p>Для этого мы будем использоват обычный браузер Google Chrome, которым сейчас пользуются многие.</p>
<p>Для начала нужно установить специальное дополнение в браузере, с помощью которого можно удобно переключатся между прокси серверами: <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="external">Proxy SwitchyOmega</a>.</p>
<p>После установки, откроется страница настроек этого дополнения, она будет выглядень примерно так:</p>

<p><img src="/070216-proxy-omega.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>Теперь вам нужно найти список бесплатных прокси серверов. Я например использую <a href="http://www.gatherproxy.com/proxylistbycountry" target="_blank" rel="external">Gather Proxy</a>. Этот сервис удобен тем, что он для каждого прокси сервера отображает его скорость, аптайм и анонимность. Заходим на этот сервис, выбираем из огромного списка нужную нам страну, например пусть это будет <a href="http://www.gatherproxy.com/proxylist/country/?c=Nigeria" target="_blank" rel="external">Нигерия</a>. Нам отобразился список доступных прокси серверов для этой страны:</p>

<p><img src="/070216-ng-proxy-list.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>Выбираем из этого списка один из самых быстрых, т.е. у которого RESPONSE TIMES самый маленький, он в списке отображается зеленым цветом (у меня на скрине обведен красным).</p>
<p>Далее переходим в настройки плагина SwitchyOmega в браузере. При установке плагина он по умолчанию создает профиль под названием “Example Profile”, переименуем его для удобства:</p>

<p><img src="/070216-ng-rename.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>После этого, вписываем в поля Server и Port настройки выбранного нами прокси сервера Нигерии:</p>

<p><img src="/070216-ng-ip-save.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>Далее открываем новую вкладку и включаем прокси:</p>

<p><img src="/070216-ng-on.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>После того как включили прокси, заходим на <a href="https://2ip.ru" target="_blank" rel="external">2ip.ru</a> и видим что мы из Нигерии:</p>

<p><img src="/070216-new-ng-ip.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>Для отключения прокси выбираем в меню плагина SwitchyOmega пункт Direct:</p>

<p><img src="/070216-direct.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<p>Недостатки использования бесплатных прокси:</p>
<ul>
<li>медленность</li>
<li>не безопасность (об этом ниже)</li>
</ul>
<h2 id="u041E__u0431_u0435_u0437_u043E_u043F_u0430_u0441_u043D_u043E_u0441_u0442_u0438__u0438_u0441_u043F_u043E_u043B_u044C_u0437_u043E_u0432_u0430_u043D_u0438_u044F__u0431_u0435_u0441_u043F_u043B_u0430_u0442_u043D_u044B_u0445__u043F_u0440_u043E_u043A_u0441_u0438__u0441_u0435_u0440_u0432_u0435_u0440_u043E_u0432"><a href="#u041E__u0431_u0435_u0437_u043E_u043F_u0430_u0441_u043D_u043E_u0441_u0442_u0438__u0438_u0441_u043F_u043E_u043B_u044C_u0437_u043E_u0432_u0430_u043D_u0438_u044F__u0431_u0435_u0441_u043F_u043B_u0430_u0442_u043D_u044B_u0445__u043F_u0440_u043E_u043A_u0441_u0438__u0441_u0435_u0440_u0432_u0435_u0440_u043E_u0432" class="headerlink" title="О безопасности использования бесплатных прокси серверов"></a>О безопасности использования бесплатных прокси серверов</h2><p>Дело в том что мы не знаем что за сервера нам предоставляют списки бесплатныых прокси. Вполне возможно что на этих серверах логируются наши запросы и потом анализируются.</p>
<p>А из этого следует вывод, что при использовании бесплатных прокси, нелья передавать свои логины и пароли. Т.е. если прокси включен, нельзя заходить в свои акаунты в соц-сетях, почтах, платежных системах (!) и пр. сайтах где у вас есть акаунты.</p>
<p>А в случае с Google Chrome, вообще следует пользоватся прокси только через анонимный режим. Т.к. в обычном режиме у вас наверняка установлены различные плагины такие как проверка вашей почты и пр. Например тот же плагин для провери почты переодически проверяет наличие новых писем и для этого отправляет запрос с идентификатором текущей сессии (это конечно не логин/пароль но тоже опасно).</p>
<p>Поэтому лучше делать так:</p>
<ol>
<li>Разрешаем использовать плагин SwitchyOmega в анонимном режиме:</li>
</ol>

<p><img src="/070216-proxy-an.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>


<p><img src="/070216-checkbox.png" alt="Как проверить сайт под IP другой страны через бесплатный прокси"></p>

<ol>
<li><p>Переходим в режим “инкогнито”, для этого нажимаем Shift + Ctrl + N</p>
</li>
<li><p>Включаем прокси - т.е. выбираем в меню плагина пункт Nigeria.</p>
</li>
<li><p>Для проверки заходим на <a href="http://2ip.ru/" target="_blank" rel="external">2ip.ru</a> который должен сказать что ваша текущая страна Нигерия.</p>
</li>
</ol>
<p>Таким образом, вы будете обезопасены от угона ваших паролей и сессий третьими лицами, которые предоставляют бесплатные прокси сервера (вспоминаем про бесплатный сыр)).</p>
<h2 id="u0418_u0441_u043F_u043E_u043B_u044C_u0437_u0443_u0435_u043C__u0431_u0435_u0441_u043F_u043B_u0430_u0442_u043D_u044B_u0439__u0440_u0435_u0436_u0438_u043C_ZenMate_VPN"><a href="#u0418_u0441_u043F_u043E_u043B_u044C_u0437_u0443_u0435_u043C__u0431_u0435_u0441_u043F_u043B_u0430_u0442_u043D_u044B_u0439__u0440_u0435_u0436_u0438_u043C_ZenMate_VPN" class="headerlink" title="Используем бесплатный режим ZenMate VPN"></a>Используем бесплатный режим ZenMate VPN</h2><p><a href="https://zenmate.com/" target="_blank" rel="external">ZenMate</a> - сервис предоставляющий платные услуги VPN серверов. В основном VPN используется для анонимности в сети. Но с таким же успехом с его помощью можно переключатся между разными IP стран.</p>
<p>Для начала нужно установить плагин для бразера Google Chrome: <a href="https://chrome.google.com/webstore/detail/zenmate-security-privacy/fdcgdnkidjaadafnichfpabhfomcebme" target="_blank" rel="external">ссылка на плагин ZenMate</a>.</p>
<p>После установки, плагин попросит вас зарегистрироватся в сервисе ZenMate, регистрируемся.</p>
<p>После регистрации вам дается 7-ми дневный премиум период с доступом ко всему списку стран доступному в этом сервисе. Вы можете переключатся между странами используя меню плагина ZenMate в браузере.</p>
<p>После окончания 7-ми дневного бесплатного премиум периода, вы можете продолжать пользоватся плагином, но список стран для вас будет ограничен. Или же мы можете заплатить и продолжать пользоваться всем списком стран.</p>
<h2 id="u0417_u0430_u043A_u043B_u044E_u0447_u0435_u043D_u0438_u0435"><a href="#u0417_u0430_u043A_u043B_u044E_u0447_u0435_u043D_u0438_u0435" class="headerlink" title="Заключение"></a>Заключение</h2><p>В заключение хочу сказать, что для меня самый удобный, быстрый и безопасный способ использования прокси это Tor браузер.</p>
<p>Если же по какой то причине Tor использовать не получается, то можно воспользоватся списком бесплатных прокси серверов, но только в анонимном режиме браузера Google Chrome.</p>
<p>Так же вы можете почитать о том, <a href="/php-detect-country-by-ip.html" title="как в PHP определить страну пользователя по IP">как в PHP определить страну пользователя по IP</a>.</p>]]></content>
    <summary type="html">
    <![CDATA[<p>Иногда возникает необходимость зайти на свой сайт под IP другой страны. Например что бы проверить ту или иную функциональность, которая работает по разному в зависимости с IP какой страны зашел пользователь. В этой статье будут рассмотрены способы как это можно удобно сделать.</p>]]>
    
    </summary>
    
      <category term="Tools" scheme="http://atoumus.github.io/categories/Tools/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Что учить PHP разработчику в 2016 году]]></title>
    <link href="http://atoumus.github.io/2016-php-trends.html"/>
    <id>http://atoumus.github.io/2016-php-trends.html</id>
    <published>2016-01-31T11:22:02.000Z</published>
    <updated>2016-03-16T11:52:00.000Z</updated>
    <content type="html"><![CDATA[<p>Что должен знать современный PHP разработчик?</p>
<p>Минимум технологий, это: HTML, CSS, PHP, MySQL, JavaScript и jQuery.</p>
<p>Но это самые основы, которых сейчас уже недостаточно для того что бы быть конкурентно способным. Web разработка, и конкретно PHP, развиваются большими шагами, и для того что бы оставатся на должном уровне, нужно постоянно изучать что то новое и совершенствовать свои знания и навыки.</p>
<p>Но что именно сейчас наиболее популярно и востребованно среди работодателей?</p>
<p>В этой статье собрана статистика с сайта <a href="http://hh.ru" target="_blank" rel="external">hh.ru</a> за февраль 2016 года, и составлены графики, что сейчас из веб-технологий наиболее востребованно. Благодаря им значительно легче определится, на что сейчас нужно делать основной упор в самообразовании.</p>
<a id="more"></a>

<p><img src="/2016-curr-php-frameworks.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-php-cms.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-databases.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-frontend.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-ci.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-dolzhnost.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-issue-trackers.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-mietodologhii-razrabotki.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-ochieriedi.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-php-shablonizatory.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-poiskovyie-dvizhki.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-sierviernyie-tiekhnologhii.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-tiestirovaniie.png" alt="Что учить PHP разработчику в 2016 году"></p>


<p><img src="/2016-curr-vcs.png" alt="Что учить PHP разработчику в 2016 году"></p>]]></content>
    <summary type="html">
    <![CDATA[<p>Что должен знать современный PHP разработчик?</p>
<p>Минимум технологий, это: HTML, CSS, PHP, MySQL, JavaScript и jQuery.</p>
<p>Но это самые основы, которых сейчас уже недостаточно для того что бы быть конкурентно способным. Web разработка, и конкретно PHP, развиваются большими шагами, и для того что бы оставатся на должном уровне, нужно постоянно изучать что то новое и совершенствовать свои знания и навыки.</p>
<p>Но что именно сейчас наиболее популярно и востребованно среди работодателей?</p>
<p>В этой статье собрана статистика с сайта <a href="http://hh.ru">hh.ru</a> за февраль 2016 года, и составлены графики, что сейчас из веб-технологий наиболее востребованно. Благодаря им значительно легче определится, на что сейчас нужно делать основной упор в самообразовании.</p>]]>
    
    </summary>
    
      <category term="PHP" scheme="http://atoumus.github.io/categories/PHP/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Init post]]></title>
    <link href="http://atoumus.github.io/init-post.html"/>
    <id>http://atoumus.github.io/init-post.html</id>
    <published>2016-01-07T06:31:41.000Z</published>
    <updated>2016-03-16T12:18:55.429Z</updated>
    <content type="html"><![CDATA[<p>Hello from <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a> :)</p>]]></content>
    <summary type="html">
    <![CDATA[<p>Hello from <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a> :)</p>]]>
    </summary>
    
      <category term="Etc" scheme="http://atoumus.github.io/categories/Etc/"/>
    
  </entry>
  
</feed>
