<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>Книги - Чистый Код. Создание, анализ и рефакторинг (Роберт Мартин) | Atoumus Blog</title> <link rel="alternate" href="http://atoumus.github.io/book-clean-code.html" hreflang="ru" /> <link rel="alternate" href="http://atoumus.github.io/en/" hreflang="en" /> <link rel="alternate" type="application/atom+xml" title="Atoumus Blog" href="/atom.xml" /> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" type="text/css" href="/css/libs/flaticon/flaticon.css"> <link rel="stylesheet" type="text/css" href="/css/libs/prism.css"> <link rel="stylesheet" type="text/css" href="/css/libs/prism-fix.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css" /> <link rel="stylesheet" type="text/css" href="/css/common.css"> </head> <body> <a href="#top" class="elevator"><span class="flaticon-upwards-arrow"></span></a> <a name="top"></a> <div class="main"> <div class="header"> <a href="/" class="logo" title="Atoumus Blog" ><img src="/images/logo.png">Atoumus Blog</a> <form class="search" action="//google.com/search" target="_blank" method="get" accept-charset="UTF-8"> <input type="search" name="q" class="search-input"> <button type="submit">Поиск</button> <input type="hidden" name="sitesearch" value="http://atoumus.github.io"> </form> <div class="social"> <a href="#" class="search-toggle flaticon-magnifier" title="Поиск"></a> <a href="/atom.xml" target="_blank" class="flaticon-rss-feed-button" title="Atom лента"></a> <a href="https://twitter.com/atoumus/" target="_blank" class="flaticon-twitter-logo-silhouette" title="Twitter"></a> <a href="https://plus.google.com/u/0/116624784918762784912" target="_blank" class="flaticon-google-plus-logo-button" title="G+"></a> </div> </div> <div class="clear-both"></div> <div class="menu"> <div class="tags"> <a href='/'>Главная</a><a href='/tag/Yii/'>Yii</a><a href='/tag/PHP/'>PHP</a><a href='/tag/Books/' class='selected'>Книги</a><a href='/tag/Learning/'>Обучение</a><a href='/tag/Zend Framework/'>Zend Framework</a><a href='/tag/Tor/'>Tor</a><a href='/tag/C Sharp/'>C#</a><a href='/tag/Drupal/'>Drupal</a><a href='/tag/Others/'>Прочее</a> </div> <div class="lang-switcher"> <span>ru</span><a href='/en/'>en</a> </div> </div> <div class="clear-both"></div> <div class="contents"> <div class="article"> <h1>Книги - Чистый Код. Создание, анализ и рефакторинг (Роберт Мартин)</h1> <div class="meta"> <div> <span class="flaticon-calendar-with-spring-binder-and-date-blocks"></span> 2013-03-30 </div> <div> <span class="flaticon-commerce"></span> <a href='/tag/Books/'>Книги</a> </div> <div class="comments-number"> <span class="flaticon-comment-white-oval-bubble"></span> <a href="#comments" data-disqus-url="http://atoumus.github.io/book-clean-code.html"></a> </div> </div> <div class="clear-both"></div> <div class="text"><p> <img src="/images/ru/articles/2013-03-30-book-clean-code/cover.png" alt="Книги - Чистый Код. Создание, анализ и рефакторинг (Роберт Мартин)" class="no-borders" align="left" style="margin: 0 20px 15px 0;" /> На днях закончил читать книгу Роберта Мартина - Чистый Код. В основном в ней идет речь про ООП программирование, про то как правильно организовывать программный код в классы, методы и функции, что бы его можно было легко поддерживать. Примеры кода приводятся на языке Java, но сама идея применима к разным языкам программирования. Каждый найдет в этой книге что то полезное для применения в своей работе. Далее некоторые идеи, которые мне больше всего понравились. </p> <h2>Классы, методы и функции</h2> <p>Классы должны подчинятся принципу единой ответственности. Один класс должен быть предназначен для работы только с одной концепцией.</p> <p>Каждый метод или функция должен выполнять только одну операцию. Если метод или функция выполняет больше одной операции, значит нужно разбить их на несколько.</p> <p>Если функция или метод в качестве аргумента принимает логический флаг, значит ее можно разбить на две функции или метода. Передача функции или методу логического флага запутывает.</p> <h2>Структура кода</h2> <p>Поэтапное проектирование структуры, цитата из книги:</p> <blockquote> <p>Когда я пишу свои функции, они получаются длинными и сложными. В них встречаются многоуровневые отступы и вложенные циклы. Они имеют длинные списки аргументов. Имена выбираются хаотично, а в коде присутствуют дубликаты. Но у меня также имеется пакет модульных тестов для всех этих неуклюжих строк до последней.</p> <p>Итак, я начинаю «причесывать» и уточнять свой код, выделять новые функции, изменять имена и устранять дубликаты. Я сокращаю методы и переупорядочиваю их. Иногда приходится ломать целые классы, но при этом слежу за тем, чтобы все тесты выполнялись успешно.</p> <p>В конечном итоге у меня остаются функции, построенные по правилам. Я не записываю их так с самого начала. И вообще не думаю, что кому-нибудь это под силу.</p> </blockquote> <p>Исходный файл должен выглядеть как газетная статья. Имя файла должно быть простым, но содержательным. Одного имени должно быть достаточно для того, чтобы читатель понял, открыл ли он нужный модуль или нет. Начальные блоки исходного файла описывают высокоуровневые концепции и алгоритмы. Степень детализации увеличивается при перемещении к концу файла, а в самом конце собираются все функции и подробности низшего уровня в исходном файле.</p> <p>Зависимые функции. Если одна функция вызывает другую, то эти функции должны располагаться вблизи друг от друга по вертикали, а вызывающая функция должна находиться над вызываемой (если это возможно). Тем самым формируется естественная структура программного кода. Если это правило будет последовательно соблюдаться, читатели кода будут уверены в том, что определения функций следуют неподалеку от их вызовов.</p> <p>Локальные переменные должны объявляться непосредственно перед первым использованием. Приватные функции должны определятся сразу же после первого использования. Вертикальное расстояние между вызовами и определениями должно быть минимальным.</p> <p>Имена классов, методов и функций должны быть &quot;говорящими&quot;. Код должен выражать намерения программиста своей структурой и алгоритмом, а не быть расплывчатым и нелогичным.</p> <h2>Рефакторинг</h2> <p>При рефакторинге, система должна работать в любой момент в процессе внесения изменений. Изменения должны вносится малыми порциями, не нарушая работоспособность кода.</p> <p>Последовательное улучшение кода. Пишется первая рабочая версия кода. Далее делается рефакторинг, после которого получается следующая рабочая версия с более чистым кодом. Далее снова делается рефакторинг и т.д.</p> <h2>Автоматическое тестирование кода</h2> <p>Тесты помогают убедится в работоспособности кода при его рефакторинге.</p> <p>Тесты не должны зависеть друг от друга.</p> <p>Каждый тестовый метод должен тестировать только одну концепцию. Возможно стоит разделять тестирование одного большого метода на несколько тестовых методов. Хотя больших методов, которые предназначены для нескольких операций, не должно быть. И в таком случае, для каждого из методов будет только один тестовый метод.</p> <h2>Многопоточный код</h2> <p>Пример оптимизации многопоточного кода. Если значительное время в выполняемом процессе расходуется на операции ввода/вывода, то многопоточная модель способна повысить эффективность работы. Пока одна часть системы ожидает ввода/вывода, другая часть использует время ожидания для выполнения других действий, обеспечивая более эффективное использование процессорного времени.</p> <h2>Удобочитаемость кода</h2> <p>Заменяйте &quot;волшебные числа&quot; именованными константами.</p> <p>Один из самых эффективных способов улучшения удобочитаемости программы заключается в том, что бы разбить обработку данных на промежуточные значения, хранящиеся в переменных с содержательными именами.</p> <p>Код должен быть выразительным и разбитым на классы и методы. Даже если от этого он будет длиннее компактного но не понятного кода.</p> <h2>Комментарии</h2> <p>Нельзя оставлять в комментариях информацию о каких либо величинах, которые может принять функция. Комментарий должен описывать что делает функция или метод. Цитата из книги:</p> <blockquote> <p>Не считая того факта, что комментарий ужасающе избыточен, в него также включена информация о порте по умолчанию, притом что функция никоим образом не может управлять этим значением. И конечно, ничто не гарантирует, что комментарий будет изменен при изменении кода, в котором это значение определяется:</p> </blockquote> <pre class="line-numbers"><code class="language-java">/**
* Порт, на котором будет работать fitnesse. По умолчанию 8082.
*
* @param fitnessePort
*/
public void setFitnessePort(int fitnessePort)
{
    this.fitnessePort = fitnessePort;
}</code></pre> <p>Всем, кто хочет научится писать правильно структурированный код, советую прочитать эту книгу. Удачи в самообразовании!</p></div> <div class="related"> <h2>Читайте также</h2> <a href="/book-web-dev-yii2.html" target="_blank" >Книги - Разработка веб-приложений в Yii 2 (Марк Сафронов)</a> <a href="/rework.html" target="_blank" >Книги - Rework Бизнес без предрассудков (Джейсон Фрайд, Дэвид Хейнмейер Ханссон)</a> <a href="/art-of-mind.html" target="_blank" >Книги - Искусство думать (Эдвард де Боно)</a> </div> <div class="share">Поделится: <script type="text/javascript">(function () { if (window.pluso) if (typeof window.pluso.start == "function") return; if (window.ifpluso == undefined) { window.ifpluso = 1; var d = document, s = d.createElement('script'), g = 'getElementsByTagName'; s.type = 'text/javascript'; s.charset = 'UTF-8'; s.async = true; s.src = ('https:' == window.location.protocol ? 'https' : 'http') + '://share.pluso.ru/pluso-like.js'; var h = d[g]('body')[0]; h.appendChild(s); } })();</script> <div class="pluso" data-background="transparent" data-options="small,round,line,horizontal,counter,theme=04" data-services="vkontakte,odnoklassniki,facebook,twitter,google,moimir,email,print"></div></div>   <div class="comments"> <a name="comments"></a> <div id="disqus_thread"></div> <script> var disqus_config = function () { this.page.url = "http://atoumus.github.io/book-clean-code.html"; this.page.identifier = "book-clean-code"; this.language = "ru"; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://atoumus.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> </div> <div class="footer"> <div class="left"> <div class="social"> <a href="#" class="icon search-toggle flaticon-magnifier" title="Поиск"></a> <a href="/atom.xml" target="_blank" class="icon flaticon-rss-feed-button" title="Atom лента"></a> <a href="https://twitter.com/atoumus/" target="_blank" class="icon flaticon-twitter-logo-silhouette" title="Twitter"></a> <a href="https://plus.google.com/u/0/116624784918762784912" target="_blank" class="icon flaticon-google-plus-logo-button" title="G+"></a> </div> <div class="author-email"> <a data-email-array='{"2":"o","0":"a","3":"u","11":"i","14":"c","5":"u","6":"s","7":"@","1":"t","13":".","9":"m","8":"g","10":"a","12":"l","16":"m","4":"m","15":"o"}' href="#"></a> </div> <div class="donate"> <a href="http://yasobe.ru/na/atoumus_blog" target="_blank">Поддержать финансово</a> </div> </div> <div class="right"> <div>  <script type="text/javascript"> document.write("<a href='//www.liveinternet.ru/click' "+ "target=_blank><img src='//counter.yadro.ru/hit?t25.5;r"+ escape(document.referrer)+((typeof(screen)=="undefined")?"": ";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth? screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+ ";"+Math.random()+ "' alt='' title='LiveInternet: показано число посетителей за"+ " сегодня' "+ "border='0' width='88' height='15'><\/a>") </script>  </div> <div> Atoumus Blog &copy; 2011 - 2018 </div> <div> Копирование и цитирование с обязательным указанием URL ссылки на оригинал страницы </div> </div> </div> <div class="clear-both"></div> </div> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script> <script type="text/javascript" src="/js/libs/prism.js"></script> <script type="text/javascript" src="/js/common.js"></script> </body> </html>